# This is an .bashrc file that contains only stuff that is needed for zbox.
# It is called in the .bashrc file.


#======================
# LOGIN STUFF
#======================

    if [[ "$HOSTNAME" == 'f1' || "$HOSTNAME" == 'f2' ]]; then
        # automatically loading modules if on zbox: hostname=f1
        #enter here modules to be loaded/removed
        module rm gcc
        module switch mpi mpi/intel/5.0.3.048
        module switch intel/2013 intel/2015
        echo -e "$COL_CYAN" "Modules configured according to ~/.bashrc file" "$COL_RESET"

        # python
        #export PATH=/home/ics/volker/Anaconda/bin:$PATH
        VIRTUAL_ENV_DISABLE_PROMPT=1 source /zbox/opt/Enthought/Canopy_64bit/User/bin/activate 
        #source /zbox/opt/Enthought/Canopy_64bit/User/bin/activate
        export LIBRARY_PATH=/zbox/opt/Enthought/Canopy_64bit/User/lib:$LIBRARY_PATH
    fi



#======================
# FUNCTIONS
#======================

    #checking if i'm on zbox before executing sbatch or squeue, also squeue alias

    function mbatch { # function to check first if I'm on zbox before executing sbatch. Also copy sbatch output to sbatch_jobID.log
        if [[ "$HOSTNAME" == f? ]]; then
            export EXECDATE=`date +%F_%Hh%M`
            sbatch $1 | tee "sbatch_jobID_$EXECDATE.log"
        else
            echo -e "$COL_RED" "You are not on zbox..." "$COL_RESET"
        fi
    }



    function sq { # function to check first if I'm on zbox before execution squeue -u mivkov
        if [[ "$HOSTNAME" == f? ]]; then
            squeue -u mivkov    
        else
            echo -e "$COL_RED" "You are not on zbox..." "$COL_RESET"
            squeue -u mivkov    
        fi
    }


