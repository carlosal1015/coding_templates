#!/bin/bash
echo "Sourcing master thesis rc                  from ~/.bashrc_master"


#=========================
# ENVIRONMENT VARIABLES
#=========================

    export MA="$HOME"'/UZH/Masterarbeit/masterarbeit'
    export SCR="$MA"/scripts
    export BA="$MA"/backup/




#=========================
# PATH
#=========================
    export PATH="$PATH":"$MA"/scripts           #add python and bash script dir
    export PATH="$PATH":"$MA"/src/dice/bin/bin  #add dice
    export PATH="$PATH":"$MA"/scripts/unb
    export PATH="$PATH":"$MA"/project/mergertree/bin #add mergertree program
    #export PATH="$PATH":'/home/mivkov/UZH/Bachelorarbeit/bachelorarbeit/programs/scripts'


    export PYTHONPATH=${PYTHONPATH}"/home/mivkov/UZH/ramses/utils/py:"



#========================
# Aliases
#========================



    #-----------------------
    # SSH
    #-----------------------


    alias ela='ssh -2Y mivkov@ela.cscs.ch'
    alias daint='ssh -2Yt mivkov@ela.cscs.ch ssh -2Y daint'
    alias hydra='ssh mivkov@cluster.s3it.uzh.ch'







    #-------------------------
    # Dir aliases
    #-------------------------

    alias ma='cd "$MA"'
    alias scr='cd "$MA"/scripts'
    alias res='cd "$MA"/results'

    alias pa='cd "$MA"/project/ramses/patch/mergertree'
    #alias pa='cd "$MA"/project/ramses/patch/unbinding_patch'
    alias m='cd "$MA"/project/mergertree'
    alias mb='cd "$MA"/project/mergertree/bin/'
    alias ms='cd "$MA"/project/mergertree/src'

    alias exec='cd "$MA"/exec'
    alias te='cd "$MA"/exec/testing'
    alias two='cd "$MA"/exec/dice_two'
    alias sub='cd "$MA"/exec/dice_sub'
    alias cos='cd "$MA"/exec/cosmo'

    alias 2='cd "$MA"/exec/2merge'
    alias 3='cd "$MA"/exec/3merge'
    alias 2f='cd "$MA"/exec/2fracture'
    alias skip='cd "$MA"/exec/skipone'

    alias fdt='cd "$MA"/exec/fieldtest'
    alias fdtn='cd "$MA"/exec/fieldtest-noneigh'
    alias f5='cd "$MA"/exec/fieldtest-500'
    alias f5n='cd "$MA"/exec/fieldtest-500-noneigh'

    alias mk='cd "$MA"/project/ramses/bin_merger'
    alias mkc='cd "$MA"/project/ramses/bin_clean'
    alias mkd='cd "$MA"/project/ramses/bin_dice'
    alias mku='cd "$MA"/project/ramses/bin_unbinding'
    alias mkud='cd "$MA"/project/ramses/bin_unbinding_dice'
    #alias mki='cd "$MA"/project/ramses/bin_dice_intel'
    #alias mkm='cd "$MA"/project/ramses/bin_dice_nompi'

    alias ramses='cd $MA/src/ramses/'
    alias dat='cd /media/mivkov/DATA/'
    
    alias dg='cd $MA/results/daint/galaxy-256-old-redshifts'
    alias dgn='cd $MA/results/daint/galaxy-256-nocalc'





    #-----------------
    # Copying stuff
    #-----------------
    #alias cpr='cp "$MA"/project/ramses/bin_unbinding/ramses3d-mladen "$MA"/exec'
    #alias cpd='cp "$MA"/project/ramses/bin_dice/ramses3d-dice "$MA"/exec'
    #alias cpc='cp "$MA"/project/ramses/bin_clean/ramses3d-clean "$MA"/exec'
    # alias cpr='cp "$MA"/project/ramses/bin_merger/ramses3d-merger "$MA"/exec'
    # alias cpu='cp "$MA"/project/ramses/bin_unbinding/ramses3d-mladen "$MA"/exec'
    # alias cpd='cp "$MA"/project/ramses/bin_dice/ramses3d-merger-dice "$MA"/exec'
    # alias cpc='cp "$MA"/project/ramses/bin_clean/ramses3d-clean "$MA"/exec'





    #-------------------------
    # Script shortcuts
    #-------------------------

    alias u=unbindingplot
    alias pp=plot_particles
    alias rp=ramsesplot
    alias tp=testplot
    alias trp=treeplot.py
    alias eg=eval_galaxies.sh

    alias upr=update_ramses.sh

    alias cs='make clfind_commons.o && make clump_finder.o && make clump_merger.o && make unbinding.o && make merger_tree.o; '

    # octal dump MPI files with 251 4-byte integers per line
    alias odmpi='od -An -v -i -w1004'



    #-------------------------
    # Running simulations
    #-------------------------

    alias goc='DATE=`date +%F_%Hh%M`; mpiexec -n 4 $MA/project/ramses/bin_clean/ramses3d-clean clean.nml 2>"$DATE"_error.log | tee run_clean_"$DATE".log'
    alias gomd='DATE=`date +%F_%Hh%M`; mpiexec -n 4 $MA/project/ramses/bin_dice/ramses3d-merger-dice merger-dice.nml 2>"$DATE"_error.log | tee run_merger_dice_"$DATE".log'
    alias gom='DATE=`date +%F_%Hh%M`; mpiexec -n 4 $MA/project/ramses/bin_merger/ramses3d-merger merger.nml 2>"$DATE"_error.log | tee run_merger_"$DATE".log'
    alias gom8='DATE=`date +%F_%Hh%M`; mpiexec -n 8 $MA/project/ramses/bin_merger/ramses3d-merger merger.nml 2>"$DATE"_error.log | tee run_merger_"$DATE".log'
    alias gou='DATE=`date +%F_%Hh%M`; mpiexec -n 4 $MA/project/ramses/bin_unbinding/ramses3d-unbinding unbinding.nml 2>"$DATE"_error.log | tee run_unbinding_"$DATE".log'
    alias goud='DATE=`date +%F_%Hh%M`; mpiexec -n 4 $MA/project/ramses/bin_unbinding_dice/ramses3d-unbinding-dice unbinding-dice.nml 2>"$DATE"_error.log | tee run_unbinding_"$DATE".log'


    alias debte='gdb --args mpirun -np 4 $MA/project/ramses/bin_dice/ramses3d-merger-dice merger-dice.nml'
    alias debfield='gdb --args mpirun -np 4 $MA/project/ramses/bin_merger/ramses3d-merger merger.nml'

    # alias mkt='make_mergertree 2>&1| tee maketree.log'



    function rmlog {
        #--------------------------------------------
        # Remove log files.
        # First asks you if you want to remove all.
        # If no, then it'll ask you file by file.
        #--------------------------------------------
        while true; do
            read -p "Do you wish to delete all *.log files? (y/n) " yn
            case $yn in
                [Yy]* ) echo "removing all *.log files."; rm *.log; break;;
                [Nn]* ) rm -i *.log; exit;;
                * ) echo "Please answer yes or no.";;
            esac
        done
        echo "done"

        
    }





